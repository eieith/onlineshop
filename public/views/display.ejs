<!DOCTYPE html> 
<html lang="en">
<head>
    <%- include('partials/head') %>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/display.css">
    <title>Home | KAZ Handmade Shop</title>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div id="logo">
            <h1>KAZ</h1>
            <h2>Handmade Shop</h2>
            <p>Your one-stop shop for handmade items</p>
        </div>
        <div class="nav">
            <ul id="nav">
                <li><a href="/">Home</a></li>
                <li><a href="/display">Items</a></li>
                <li><a href="/cart">Cart</a></li>
                <li><a href="/review">Review</a></li>
            </ul>
        </div>
    </header>

    <!-- Search Bar Section -->
    <section class="search-bar">
        <input type="text" id="search" placeholder="Search popular items...">
    </section>

    <!-- Popular Items Section -->
    <main id="itemsContainer">
        <% if (products && products.length > 0) { %>
            <div class="items-grid">
                <% products.forEach(product => { %>
                    <div class="product-item">
                        <img src="<%= product.img_url %>" alt="<%= product.name %>" onclick="showItemDetails('<%= product.name %>', '<%= product.descript %>', '<%= product.price %>', '<%= product.img_url %>')"/>
                        <h3><%= product.name %></h3>
                        <p><strong>Price:</strong> $<%= product.price %></p>
                        <!-- Add to Cart Button -->
<button onclick='addToCart("<%= product.name %>", "<%= product.price %>", "<%= product.id %>")'>
    Add to Cart
</button>
                    </div>
                <% }); %>
            </div>
        <% } else { %>
            <p>No popular items available at the moment. Please check back later!</p>
        <% } %>
    </main>

    <!-- Item Details Modal -->
    <div id="itemDetailsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="itemName"></h2>
            <img id="itemImage" src="" alt="Item Image" />
            <p id="itemDescription"></p>
            <p><strong>Price:</strong> $<span id="itemPrice"></span></p>
        </div>
    </div>

   

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2024 KAZ Handmade Shop. All Rights Reserved.</p>
    </footer>

    <!-- JavaScript -->
    <script>
       

        // Search bar functionality
        document.getElementById('search').addEventListener('input', function (e) {
            const searchValue = e.target.value.toLowerCase().trim();
            const items = document.querySelectorAll('.product-item');

            items.forEach(item => {
                const itemName = item.querySelector('h3').innerText.toLowerCase();
                item.style.display = itemName.includes(searchValue) ? '' : 'none';
            });
        });


        // Show Item Details in a Modal
        function showItemDetails(name, description, price, imgUrl) {
            document.getElementById('itemName').innerText = name;
            document.getElementById('itemDescription').innerText = description;
            document.getElementById('itemPrice').innerText = price;
            document.getElementById('itemImage').src = imgUrl;
            document.getElementById('itemDetailsModal').style.display = 'block';
        }

        // Close Item Modal
        function closeModal() {
            document.getElementById('itemDetailsModal').style.display = 'none';
        }

        // Close modal when clicked outside of the modal content
        window.onclick = function(event) {
            if (event.target == document.getElementById('itemDetailsModal')) {
                closeModal();
            }
            if (event.target == document.getElementById('cartModal')) {
                closeCart();
            }
        }
        function addToCart(name, price, id) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.push({ name, price, id });
        localStorage.setItem('cart', JSON.stringify(cart));
        alert(`${name} has been added to your cart!`);
        }
    </script>
</body>
</html>
